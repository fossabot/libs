/**
 +---------+
 | Plugins |
 +---------+
 */
plugins {
    id 'pub.ihub.plugin'
}

/**
 +----------------+
 | Build Settings |
 +----------------+
 */
subprojects {
    apply {
        plugin 'pub.ihub.plugin.ihub-java'
        plugin 'pub.ihub.plugin.ihub-test'
        plugin 'pub.ihub.plugin.ihub-verification'
        if (project.name != 'ihub-starter') {
            plugin 'pub.ihub.plugin.ihub-publish'
        }
    }
    dependencies {
        if (project.name != 'ihub-core') {
            api project(':ihub-core')
        }
        annotationProcessor 'org.springframework.boot:spring-boot-autoconfigure-processor'
    }
}

apply {
    plugin 'pub.ihub.plugin.ihub-publish'
}

iHubBom {
    bomVersions.clear()
    dependencyVersions.clear()
    groupVersions.clear()
    excludeModules.clear()
    dependencies.clear()
    dependencyVersions {
        group rootProject.group.toString() modules subprojects.findAll {
            it.plugins.hasPlugin 'pub.ihub.plugin.ihub-publish'
        }.name as String[] version rootProject.version.toString()
    }
}
